import{u as b,r as _,j as e,H as N}from"./app-CGB4ODws.js";import{a as o,A as y}from"./app-layout-CdoCdhN3.js";import{B as m}from"./index-CoEQQPkE.js";import{C,a as w,b as F,c as P}from"./card-7nCsXvUu.js";import{I as p}from"./input-DwKfjgaC.js";import{L as r}from"./label-BOnqJzMN.js";import{T as D}from"./textarea-DcCO0Fsh.js";import{X as E}from"./index-DA8zFCnf.js";import{U}from"./upload-CIHgafPv.js";/* empty css            */import"./index-CBYWexA8.js";import"./index-B22tErd8.js";import"./index-WETP2B6r.js";import"./index-BEG20Jkn.js";import"./index-CxakdeFI.js";import"./users-BNPXICh5.js";import"./briefcase-ChUtEPIf.js";function O({popup:a}){const x=[{title:"Admin Dashboard",href:o.dashboard().url},{title:"Popups",href:o.popups.index().url},{title:"Edit Popup"}],{data:i,setData:s,post:j,processing:g,errors:d}=b({title:a.title,content:a.content,image_path:null,active:a.active,start_date:a.start_date||"",end_date:a.end_date||"",_method:"PUT"}),[h,u]=_.useState(null),v=t=>{const n=t.target.files?.[0];if(n){s("image_path",n);const c=new FileReader;c.onloadend=()=>u(c.result),c.readAsDataURL(n)}},f=t=>{t.preventDefault(),j(o.popups.update({popup:a.id}).url,{forceFormData:!0})},l=h||(a.image_path?`/storage/${a.image_path}`:null);return e.jsxs(y,{breadcrumbs:x,children:[e.jsx(N,{title:"Edit Popup"}),e.jsxs(C,{children:[e.jsx(w,{children:e.jsx(F,{children:"Edit Popup"})}),e.jsx(P,{children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"title",children:"Title *"}),e.jsx(p,{id:"title",value:i.title,onChange:t=>s("title",t.target.value),required:!0}),d.title&&e.jsx("p",{className:"text-sm text-destructive",children:d.title})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"active",checked:i.active,onChange:t=>s("active",t.target.checked),className:"rounded"}),e.jsx(r,{htmlFor:"active",children:"Active"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"start_date",children:"Start Date"}),e.jsx(p,{id:"start_date",type:"datetime-local",value:i.start_date,onChange:t=>s("start_date",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"end_date",children:"End Date"}),e.jsx(p,{id:"end_date",type:"datetime-local",value:i.end_date,onChange:t=>s("end_date",t.target.value)})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"content",children:"Content *"}),e.jsx(D,{id:"content",value:i.content,onChange:t=>s("content",t.target.value),rows:6,required:!0}),d.content&&e.jsx("p",{className:"text-sm text-destructive",children:d.content})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Image"}),l&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l,alt:"Popup",className:"w-full max-h-64 object-contain rounded-lg border"}),h&&e.jsx(m,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>{s("image_path",null),u(null)},children:e.jsx(E,{className:"h-4 w-4"})})]}),e.jsxs("label",{htmlFor:"image_path",className:"flex items-center gap-2 px-4 py-2 border-2 border-dashed rounded-lg cursor-pointer bg-muted/50 hover:bg-muted",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:l?"Upload new image":"Upload image"}),e.jsx("input",{id:"image_path",type:"file",className:"hidden",accept:"image/*",onChange:v})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(m,{type:"submit",disabled:g,children:"Update Popup"})]})]})})]})]})}export{O as default};
