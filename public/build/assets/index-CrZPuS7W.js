import{j as e,H as j,L as o,a as p}from"./app-BhJr64Io.js";import{A as N,a as c}from"./app-layout-DxnHe2Ps.js";import{B as y}from"./badge-CnPwoLtX.js";import{c as h,B as r}from"./index-B1KPLk6u.js";import{C as l,a as i,b as d,c as n}from"./card-BjkkdsxM.js";import{E as g}from"./eye-BlF0wKDW.js";import{T as b}from"./trash-2-6-lxnxHn.js";/* empty css            */import"./index-BKfeb9Yo.js";import"./index-tU5oWaZl.js";import"./index-LoYgfw8t.js";import"./index-CFyF2xbQ.js";import"./index-F4I9nMVa.js";import"./index-CxakdeFI.js";import"./users-dUMLyZnq.js";import"./briefcase-DKZee5n9.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],m=h("Activity",v);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],_=h("Globe",w),A=[{title:"Admin Dashboard",href:c.dashboard().url},{title:"Visitors",href:c.visitors.index().url}];function U({visitors:s}){const u=t=>{confirm("Are you sure you want to delete this visitor record?")&&p.delete(c.visitors.destroy({visitor:t}).url)},f=t=>t>50?{variant:"destructive",label:"High"}:t>20?{variant:"secondary",label:"Medium"}:{variant:"outline",label:"Low"},x=s.data.reduce((t,a)=>t+a.request_count,0);return e.jsxs(N,{breadcrumbs:A,children:[e.jsx(j,{title:"Visitors Analytics"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Visitors Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and monitor website visitor activity"})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Visitors"}),e.jsx(_,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.total}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Unique IP addresses"})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Requests"}),e.jsx(m,{className:"h-5 w-5 text-green-600"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All page requests"})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Average Requests"}),e.jsx(m,{className:"h-5 w-5 text-orange-600"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.total>0?(x/s.total).toFixed(1):0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per visitor"})]})]})]}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(d,{children:["Visitor Activity (",s.total,")"]})}),e.jsxs(n,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"IP Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Request Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Activity Level"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"User Agent"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Last Visited"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"First Visit"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:s.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-sm text-muted-foreground",children:"No visitor data found"})}):s.data.map(t=>{const a=f(t.request_count);return e.jsxs("tr",{className:"border-b hover:bg-accent/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono font-medium",children:t.ip_address}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsx("span",{className:"font-semibold",children:t.request_count})," ",e.jsx("span",{className:"text-muted-foreground",children:"requests"})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(y,{variant:a.variant,children:a.label})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:e.jsx("div",{className:"max-w-xs truncate",children:t.user_agent||"Unknown"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:[new Date(t.last_visited_at).toLocaleDateString(),e.jsx("div",{className:"text-xs",children:new Date(t.last_visited_at).toLocaleTimeString()})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(o,{href:c.visitors.show({visitor:t.id}).url,children:e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(g,{className:"h-4 w-4"})})}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>u(t.id),children:e.jsx(b,{className:"h-4 w-4 text-destructive"})})]})})]},t.id)})})]})}),s.last_page>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between border-t pt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",s.from," to ",s.to," of"," ",s.total," results"]}),e.jsx("div",{className:"flex gap-2",children:s.links.map((t,a)=>t.url?e.jsx(o,{href:t.url,children:e.jsx(r,{variant:t.active?"default":"outline",size:"sm",dangerouslySetInnerHTML:{__html:t.label}})},a):e.jsx(r,{variant:"outline",size:"sm",disabled:!0,dangerouslySetInnerHTML:{__html:t.label}},a))})]})]})]})]})]})}export{U as default};
