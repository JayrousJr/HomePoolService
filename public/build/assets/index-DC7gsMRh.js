import{j as e,H as c,L as i,a as o}from"./app-DU_Uqt_7.js";import{B as m}from"./badge-B385rnuS.js";import{B as l}from"./index-C4Wi5Few.js";import{C as x,a as h,b as u,c as p}from"./card-Cv2gufsc.js";import{A as f,a as d}from"./app-layout-Dqrvh0ER.js";import{P as j}from"./plus-oh8Ed932.js";import{E as N}from"./eye-g51lCFl0.js";import{S as g}from"./square-pen-8gTZVU1K.js";import{T as y}from"./trash-2-CH6PtHcp.js";/* empty css            */import"./index-CbIKs6W5.js";import"./index-DXyGKaGY.js";import"./index-BufbPJzO.js";import"./index-B-oI3T1w.js";import"./index-M91RncAE.js";import"./index-CxakdeFI.js";import"./users-DiQ_qV7b.js";import"./briefcase-CIZ3dIis.js";const v=[{title:"Admin Dashboard",href:d.dashboard().url},{title:"Tasks",href:d.tasks.index().url}],b=t=>{switch(t){case"completed":return"default";case"in_progress":return"secondary";case"cancelled":return"destructive";case"pending":default:return"outline"}};function U({tasks:t,is_manager:r}){const n=s=>{confirm("Are you sure you want to delete this task?")&&o.delete(d.tasks.destroy({task:s}).url)};return e.jsxs(f,{breadcrumbs:v,children:[e.jsx(c,{title:"Tasks"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tasks"}),e.jsx("p",{className:"text-muted-foreground",children:r?"Manage all tasks assigned to technicians":"View and update your assigned tasks"})]}),r&&e.jsx(i,{href:d.tasks.create().url,children:e.jsxs(l,{children:[e.jsx(j,{className:"h-4 w-4"}),"Create Task"]})})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(u,{children:["All Tasks (",t.total,")"]})}),e.jsxs(p,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Service Request"}),r&&e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Technician"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Scheduled Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:t.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:r?7:6,className:"px-4 py-8 text-center text-sm text-muted-foreground",children:"No tasks found"})}):t.data.map(s=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-accent/50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-medium",children:[s.service_request?.name||"N/A",e.jsx("div",{className:"text-xs text-muted-foreground",children:s.service_request?.service})]}),r&&e.jsx("td",{className:"px-4 py-3 text-sm",children:s.technician?.name||"Unassigned"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(m,{variant:b(s.status),children:s.status})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:s.scheduled_date?new Date(s.scheduled_date).toLocaleDateString():"Not scheduled"}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(i,{href:d.tasks.show({task:s.id}).url,children:e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(N,{className:"h-4 w-4"})})}),r&&!s.assigned_tasks?.some(a=>a.status==="cancelled"||a.status==="completed")&&e.jsx(i,{href:d.tasks.edit({task:s.id}).url,children:e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(g,{className:"h-4 w-4"})})}),r&&!s.assigned_tasks?.some(a=>a.status==="cancelled"||a.status==="completed")&&e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>n(s.id),children:e.jsx(y,{className:"h-4 w-4 text-destructive"})})]})})]},s.id))})]})}),t.last_page>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between border-t pt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",t.from," to ",t.to," of"," ",t.total," results"]}),e.jsx("div",{className:"flex gap-2",children:t.links.map((s,a)=>s.url?e.jsx(i,{href:s.url,children:e.jsx(l,{variant:s.active?"default":"outline",size:"sm",dangerouslySetInnerHTML:{__html:s.label}})},a):e.jsx(l,{variant:"outline",size:"sm",disabled:!0,dangerouslySetInnerHTML:{__html:s.label}},a))})]})]})]})]})]})}export{U as default};
