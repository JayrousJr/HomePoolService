import{r as x,u as R,j as e,H as T,L as f,a as c}from"./app-9Exb3EVr.js";import{B as H}from"./badge-8GEJduea.js";import{B as a}from"./index-2-B5rjCJ.js";import{C as i,a as l,b as n,c as o}from"./card-Bg7yOCYH.js";import{D as k,a as z,b as L,c as $,d as E,e as J}from"./dialog-DeMnHelx.js";import{L as O}from"./label-G4pWOIue.js";import{T as U}from"./textarea-Bjao5RZr.js";import{A as B,a as m,U as F}from"./app-layout-DGnY7GS_.js";import{E as P}from"./eye-CtgkHfbd.js";import{C as I}from"./check-C2VcaN4M.js";import{X as M}from"./index-DXdfmWYG.js";import{U as V}from"./user-plus-CGTE5IU2.js";import{T as X}from"./trash-2-D9ZL3iRf.js";/* empty css            */import"./index-Bu1ZHxIW.js";import"./index-C1q1p7i1.js";import"./index-CDm4G2dX.js";import"./index-Hd4PJH-J.js";import"./index-CxakdeFI.js";import"./users-BWTVJ8El.js";import"./briefcase-C2PSd66h.js";const q=[{title:"Admin Dashboard",href:m.dashboard().url},{title:"Job Applicants",href:m.jobApplicants.index().url}],G=s=>{switch(s){case"hired":return"default";case"accepted":return"secondary";case"rejected":return"destructive";case"pending":default:return"outline"}};function ge({applicants:s,applicationWindow:r}){const[g,d]=x.useState(!1),[h,j]=x.useState(null),[K,Q]=x.useState(!1),{data:N,setData:b,post:v,processing:u,reset:y}=R({rejection_reason:""}),A=t=>{confirm("Are you sure you want to accept this application?")&&c.post(`/admin/job-applicants/${t}/accept`)},C=t=>{j(t),d(!0)},w=()=>{h&&v(`/admin/job-applicants/${h.id}/reject`,{onSuccess:()=>{d(!1),y(),j(null)}})},D=()=>{confirm(`Are tou sure you are ${r.open?"Close Application Window?":" Open Application window for Technician to apply?"} `)&&c.put(`/admin/toggle/${r.id}`,{data:r.open})},_=t=>{confirm("Are you sure you want to hire this applicant? This will create a technician account and send credentials via email.")&&c.post(`/admin/job-applicants/${t}/hire`)},S=t=>{confirm("Are you sure you want to delete this applicant?")&&c.delete(m.jobApplicants.destroy({job_applicant:t}).url)};return e.jsxs(B,{breadcrumbs:q,children:[e.jsx(T,{title:"Job Applicants"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Job Applicants"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and manage job applications"})]}),e.jsx("div",{className:"",children:e.jsx(a,{onClick:D,className:`${r.open}`,children:`${r.open?"Close Application Window":" Open Applications"}`})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(i,{children:[e.jsx(l,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Total Applications"})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.total})})]}),e.jsxs(i,{children:[e.jsx(l,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Pending"})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.data.filter(t=>t.status==="pending").length})})]}),e.jsxs(i,{children:[e.jsx(l,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Accepted"})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.data.filter(t=>t.status==="accepted").length})})]}),e.jsxs(i,{children:[e.jsx(l,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Hired"})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.data.filter(t=>t.status==="hired").length})})]})]}),e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(n,{children:["All Applicants (",s.total,")"]})}),e.jsxs(o,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Phone"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Applied At"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:s.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-sm text-muted-foreground",children:"No applicants found"})}):s.data.map(t=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-accent/50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:t.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:t.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:t.phone}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:t.city&&t.state?`${t.city}, ${t.state}`:t.zip||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(H,{variant:G(t.status||"pending"),children:(t.status||"pending").charAt(0).toUpperCase()+(t.status||"pending").slice(1)})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(f,{href:m.jobApplicants.show({job_applicant:t.id}).url,children:e.jsx(a,{variant:"ghost",size:"sm",title:"View Details",children:e.jsx(P,{className:"h-4 w-4"})})}),t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>A(t.id),title:"Accept",className:"text-green-600 hover:text-green-700",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>C(t),title:"Reject",className:"text-red-600 hover:text-red-700",children:e.jsx(M,{className:"h-4 w-4"})})]}),t.status==="accepted"&&e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>_(t.id),title:"Hire & Create Account",className:"text-blue-600 hover:text-blue-700",children:e.jsx(V,{className:"h-4 w-4"})}),t.status==="hired"&&e.jsx(a,{variant:"ghost",size:"sm",disabled:!0,title:"Hired",className:"text-green-600",children:e.jsx(F,{className:"h-4 w-4"})}),t.status!=="hired"&&e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>S(t.id),title:"Delete",children:e.jsx(X,{className:"h-4 w-4 text-destructive"})})]})})]},t.id))})]})}),s.last_page>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between border-t pt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",s.from," to ",s.to," ","of ",s.total," results"]}),e.jsx("div",{className:"flex gap-2",children:s.links.map((t,p)=>t.url?e.jsx(f,{href:t.url,children:e.jsx(a,{variant:t.active?"default":"outline",size:"sm",dangerouslySetInnerHTML:{__html:t.label}})},p):e.jsx(a,{variant:"outline",size:"sm",disabled:!0,dangerouslySetInnerHTML:{__html:t.label}},p))})]})]})]})]}),e.jsx(k,{open:g,onOpenChange:d,children:e.jsxs(z,{children:[e.jsxs(L,{children:[e.jsx($,{children:"Reject Application"}),e.jsx(E,{children:"Provide a reason for rejecting this application (optional). An email will be sent to the applicant."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"rejection_reason",children:"Rejection Reason"}),e.jsx(U,{id:"rejection_reason",placeholder:"Enter reason for rejection (optional)...",value:N.rejection_reason,onChange:t=>b("rejection_reason",t.target.value),rows:4})]})}),e.jsxs(J,{children:[e.jsx(a,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:w,disabled:u,children:u?"Rejecting...":"Reject Application"})]})]})})]})}export{ge as default};
