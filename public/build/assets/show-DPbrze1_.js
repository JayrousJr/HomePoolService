import{b as y,r as A,j as e,H as D,L as m}from"./app-D1LAGhTd.js";import{B as u}from"./badge-D83v_4ym.js";import{c as k,B as n}from"./index-vPf-Y1-R.js";import{C as r,a,b as i,d as o,c}from"./card-D3Kjjj0N.js";import{D as S,a as q,b as B,c as I}from"./dialog-DkluynLL.js";import{a as l,A as L}from"./app-layout-D594Jykp.js";import{A as M}from"./arrow-left-OXtYOg1D.js";import{C as $}from"./cog-CeAFdTpk.js";import{U as j}from"./user-DgvEKn7x.js";import{C as p}from"./calendar-DG17dSC-.js";import{C as g}from"./circle-check-big-BFh9YlGm.js";import{Z as f}from"./zoom-in-DhH8shyO.js";import{C as N}from"./clock-BBQYra-e.js";import{C as E}from"./circle-x-D1aWbLCE.js";/* empty css            */import"./index-DKfxItpY.js";import"./index-Cs5eqXL-.js";import"./index-C4zk7_bo.js";import"./index-BrZvrmiQ.js";import"./index-Cflb32EF.js";import"./index-CxakdeFI.js";import"./users-DqbY7U1g.js";import"./briefcase-D2j7oob_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M16 2v20",key:"rotuqe"}]],P=k("Notebook",H),R=s=>{switch(s){case"completed":return"default";case"in_progress":return"secondary";case"cancelled":return"destructive";case"pending":default:return"outline"}},U=s=>{switch(s){case"completed":return e.jsx(g,{className:"h-5 w-5 text-green-500"});case"in_progress":return e.jsx(N,{className:"h-5 w-5 text-blue-500"});case"cancelled":return e.jsx(E,{className:"h-5 w-5 text-red-500"});case"pending":default:return e.jsx(N,{className:"h-5 w-5 text-yellow-500"})}};function ne({assignedTask:s}){const{auth:v}=y().props,x=v?.user,[t,d]=A.useState(null),h=x?.roles?.some(C=>["Administrator","Manager"].includes(C)),w=s.task?.technician?.email===x?.email,b=(h||w)&&s.status!=="cancelled",_=[{title:"Assigned Tasks",href:l.assignedTasks.index().url},{title:`Task #${s.id.substring(0,8)}`,href:l.assignedTasks.show({assigned_task:s.id}).url}];return e.jsxs(L,{breadcrumbs:_,children:[e.jsx(D,{title:`Assigned Task #${s.id.substring(0,8)}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m,{href:l.assignedTasks.index().url,children:e.jsx(n,{variant:"outline",size:"icon",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Assigned Task #",s.id.substring(0,8)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Task details and progress"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[b&&s.status!=="completed"&&e.jsx(m,{href:l.assignedTasks.edit({assigned_task:s.id}).url,children:e.jsxs(n,{children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Process Task"]})}),h&&s.status==="cancelled"&&s.task?.id&&e.jsx(m,{href:l.tasks.edit({task:s.task.id}).url,children:e.jsxs(n,{variant:"outline",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Reassign Task"]})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(i,{children:"Task Status"}),e.jsx(o,{children:"Current progress and timeline"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[U(s.status),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Status"}),e.jsx(u,{variant:R(s.status),children:s.status.replace("_"," ")})]})]}),s.task?.comments&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(P,{className:"mt-0.5 h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"comments of the Task"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.task.comments})]})]}),s.started_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{className:"mt-0.5 h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Started At"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.started_at).toLocaleString()})]})]}),s.completed_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"mt-0.5 h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Completed At"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.completed_at).toLocaleString()})]})]})]})]}),e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(i,{children:"Assignment Details"}),e.jsx(o,{children:"Technician and schedule"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(j,{className:"mt-0.5 h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Assigned Technician"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.task?.technician?.name||"Unassigned"}),s.task?.technician?.email&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.task.technician.email})]})]}),s.task?.scheduled_date&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{className:"mt-0.5 h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Scheduled Date"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.task.scheduled_date).toLocaleDateString()})]})]})]})]})]}),s.task?.service_request&&e.jsxs(r,{children:[e.jsx(a,{children:e.jsx(i,{children:"Service Request Details"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Client Name"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.task.service_request.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Service Type"}),e.jsx(u,{variant:"outline",children:s.task.service_request.service})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.task.service_request.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.task.service_request.phone})]})]}),s.task.service_request.description&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium",children:"Description"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap text-muted-foreground",children:s.task.service_request.description})]})]})]}),s.feedback&&e.jsxs(r,{children:[e.jsx(a,{children:e.jsx(i,{children:"Technician Feedback"})}),e.jsx(c,{children:e.jsx("p",{className:"text-sm whitespace-pre-wrap text-muted-foreground",children:s.feedback})})]}),(s.image_before||s.image_after)&&e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(i,{children:"Task Images"}),e.jsx(o,{children:"Before and after photos"})]}),e.jsx(c,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.image_before&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium",children:"Before"}),e.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>d({url:`/storage/${s.image_before}`,title:"Before Image"}),children:[e.jsx("img",{src:`/storage/${s.image_before}`,alt:"Before",className:"h-auto w-full rounded-md border"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-md bg-black/50 opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx(f,{className:"h-8 w-8 text-white"})})]})]}),s.image_after&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium",children:"After"}),e.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>d({url:`/storage/${s.image_after}`,title:"After Image"}),children:[e.jsx("img",{src:`/storage/${s.image_after}`,alt:"After",className:"h-auto w-full rounded-md border"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-md bg-black/50 opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx(f,{className:"h-8 w-8 text-white"})})]})]})]})})]})]}),e.jsx(S,{open:!!t,onOpenChange:()=>d(null),children:e.jsxs(q,{className:"max-w-4xl",children:[e.jsx(B,{children:e.jsx(I,{children:t?.title})}),e.jsx("div",{className:"relative w-full",children:t&&e.jsx("img",{src:t.url,alt:t.title,className:"h-auto max-h-[80vh] w-full rounded-md object-contain"})})]})})]})}export{ne as default};
